# TODO: Поддержка нескольких основных тренировок в дне

- Админ UI: в карточке дня показывать список основных с add/remove/reorder; диалог выбора с мультивыбором; “только зарядка” выключает список; сохранение недели отправляет массив {workoutId, order}.
- Валидация плана: PlanValidationService считает тренировочным день, если mainWorkouts.length > 0; warmup-only иначе; allowedWorkoutDaysPerWeek — по количеству дней с основными.
- Генерация UserDailyPlan: использовать массив основных; для тренировочных дней заполнять все основные по порядку; warmup-only — только разминка; stepIndex для каждого основного.
- Сохранение статуса выполнения: UserWorkoutCompletion хранит workoutId + order/stepIndex; чтение/запись прогресса поддерживает несколько основных; при изменении расписания — сопоставление по workoutId или сброс несоответствующих completion.

- Обновление ролей в сессии: после смены роли/прав выполнять refresh сессии/пересоздание JWT (например, отдельный endpoint + `jwt` callback с подтягиванием роли из БД при trigger=update), чтобы клиент видел актуальную роль; оставить server-side проверку через createAbility как fallback.
